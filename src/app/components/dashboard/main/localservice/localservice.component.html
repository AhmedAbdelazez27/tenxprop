<nav aria-label="breadcrumb">
    <ol class="breadcrumb breadcrumb-box bg-transparent px-0">
      <li class="breadcrumb-item">
        <a [routerLink]="['/Main/Home']">Home</a>
      </li>
      <li class="breadcrumb-item active" aria-current="page">
        Localservice
      </li>
    </ol>
  </nav>
  
  <div class="bg-white round-20 p-3">
    <div class="d-flex gap-2 align-items-center mb-3">
        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40" fill="none">
            <path d="M23.333 5V11.6667C23.333 12.1087 23.5086 12.5326 23.8212 12.8452C24.1337 13.1577 24.5576 13.3333 24.9997 13.3333H31.6663M23.333 5H11.6663C10.7823 5 9.93444 5.35119 9.30932 5.97631C8.6842 6.60143 8.33301 7.44928 8.33301 8.33333V31.6667C8.33301 32.5507 8.6842 33.3986 9.30932 34.0237C9.93444 34.6488 10.7823 35 11.6663 35H28.333C29.2171 35 30.0649 34.6488 30.69 34.0237C31.3152 33.3986 31.6663 32.5507 31.6663 31.6667V13.3333M23.333 5L31.6663 13.3333M14.9997 28.3333H24.9997M14.9997 21.6667H24.9997" stroke="#4B85B5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
        <h4 class="main-blue bold">Localservice</h4>
    </div>
  
    <div class="accordion" id="accordionExample" *ngIf="groupedLocalservices.length">
        <div class="accordion-item" *ngFor="let group of groupedLocalservices; let i = index">
          
          <h2 class="accordion-header" [id]="'heading' + i">
            <button
              class="accordion-button"
              type="button"
              data-bs-toggle="collapse"
              [attr.data-bs-target]="'#collapse' + i"
              [attr.aria-expanded]="i === 0 ? 'true' : 'false'"
              [attr.aria-controls]="'collapse' + i"
              [ngClass]="{ collapsed: i !== 0 }">
              {{ group.contractnumber }}
            </button>
          </h2>
      
          <div
            [id]="'collapse' + i"
            class="accordion-collapse collapse"
            [ngClass]="{ show: i === 0 }"
            [attr.aria-labelledby]="'heading' + i"
            data-bs-parent="#accordionExample">
          <div class="accordion-body">
            <div *ngFor="let category of group.categoryGroups">
              <div class="d-flex gap-2 align-items-center mb-2">
                <!-- Category Icon -->
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M21 9V12.5C20.4696 12.5 19.9609 12.7107 19.5858 13.0858C19.2107 13.4609 19 13.9696 19 14.5C19 15.0304 19.2107 15.5391 19.5858 15.9142C19.9609 16.2893 20.4696 16.5 21 16.5V20L4.51902 20.008C3.56002 18.372 3 16.404 3 14.287C3 11.654 3.865 9.253 5.288 7.433C6.857 5.428 9.103 4.128 11.615 4.008L21 9ZM21 9H4.27802M15 13V13.01M8 13V13.01M11 16V16.01" stroke="#D6C4AC" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
                <h5 class="bold main-blue">{{ category.categoryTypeLkp }}</h5>
              </div>
  
              <div *ngFor="let localservice of category.services" class="border-bottom mt-3 mb-4">
                <div class="title-18 mb-2">{{ localservice.categoryName }}</div>
                <div class="row">
                  <div class="col-xl col-lg-4 col-sm-6 mb-3">
                    <p class="bold main-blue">Working Days</p>
                    <p>{{ localservice.noOfWorkingDays }}</p>
                  </div>
                  <div class="col-xl col-lg-4 col-sm-6 mb-3">
                    <p class="bold main-blue">Working Hours</p>
                    <p>{{ localservice.workingHours }}</p>
                  </div>
                  <div class="col-xl col-lg-4 col-sm-6 mb-3">
                    <p class="bold main-blue">Address</p>
                    <p>{{ localservice.address }}</p>
                  </div>
                  <div class="col-xl col-lg-4 col-sm-6 mb-3">
                    <p class="bold main-blue">Phone Number</p>
                    <p>{{ localservice.mobileNumber }}</p>
                  </div>
                  <div class="col-xl col-lg-4 col-sm-12 mb-3">
                    <div class="d-flex gap-3">
                      <button class="btn-location" (click)="openMapPopup(localservice)">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <g opacity="0.8">
                                <path d="M9 11C9 11.7957 9.31607 12.5587 9.87868 13.1213C10.4413 13.6839 11.2044 14 12 14C12.7956 14 13.5587 13.6839 14.1213 13.1213C14.6839 12.5587 15 11.7957 15 11C15 10.2044 14.6839 9.4413 14.1213 8.87869C13.5587 8.31609 12.7956 8.00002 12 8.00002C11.2044 8.00002 10.4413 8.31609 9.87868 8.87869C9.31607 9.4413 9 10.2044 9 11Z" stroke="#E0D8C6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                <path d="M17.657 16.657L13.414 20.9C13.039 21.2746 12.5306 21.4851 12.0005 21.4851C11.4704 21.4851 10.962 21.2746 10.587 20.9L6.343 16.657C5.22422 15.5382 4.46234 14.1127 4.15369 12.5609C3.84504 11.009 4.00349 9.40053 4.60901 7.93874C5.21452 6.47696 6.2399 5.22755 7.55548 4.34852C8.87107 3.46949 10.4178 3.00031 12 3.00031C13.5822 3.00031 15.1289 3.46949 16.4445 4.34852C17.7601 5.22755 18.7855 6.47696 19.391 7.93874C19.9965 9.40053 20.155 11.009 19.8463 12.5609C19.5377 14.1127 18.7758 15.5382 17.657 16.657Z" stroke="#E0D8C6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            </g>
                        </svg>                      </button>
                      <div>
                        <input type="checkbox" class="btn-check" id="btn-check1" autocomplete="off">
                        <label class="btn btn-fav" for="btn-check1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M8.24228 7.33998L1.86228 8.26498L1.74928 8.28798C1.57822 8.3334 1.42227 8.42339 1.29737 8.54879C1.17247 8.67418 1.08308 8.83047 1.03834 9.00171C0.993598 9.17295 0.995105 9.35299 1.04271 9.52346C1.09031 9.69392 1.18229 9.8487 1.30928 9.97198L5.93128 14.471L4.84128 20.826L4.82828 20.936C4.81781 21.1129 4.85454 21.2894 4.93473 21.4475C5.01491 21.6055 5.13566 21.7395 5.28461 21.8355C5.43356 21.9315 5.60537 21.9863 5.78243 21.9941C5.95949 22.0019 6.13544 21.9625 6.29228 21.88L11.9983 18.88L17.6913 21.88L17.7913 21.926C17.9563 21.991 18.1357 22.0109 18.311 21.9837C18.4863 21.9566 18.6513 21.8832 18.7889 21.7712C18.9265 21.6593 19.0318 21.5127 19.0941 21.3466C19.1564 21.1805 19.1734 21.0008 19.1433 20.826L18.0523 14.471L22.6763 9.97098L22.7543 9.88598C22.8657 9.74875 22.9388 9.58444 22.966 9.40978C22.9932 9.23512 22.9737 9.05636 22.9094 8.89171C22.845 8.72707 22.7382 8.58242 22.5998 8.4725C22.4613 8.36258 22.2962 8.29132 22.1213 8.26598L15.7413 7.33998L12.8893 1.55998C12.8068 1.39252 12.679 1.2515 12.5205 1.15289C12.3619 1.05428 12.179 1.00201 11.9923 1.00201C11.8056 1.00201 11.6226 1.05428 11.4641 1.15289C11.3056 1.2515 11.1778 1.39252 11.0953 1.55998L8.24228 7.33998Z" fill="" />
                            </svg>                       
                         </label>
                      </div>
                    </div>
                  </div>
                </div>
              </div> <!-- end of single service -->
            </div> <!-- end of category group -->
          </div>
        </div>
      </div>
    </div>
  </div>
  
<!-- Map Popup Modal with OpenStreetMap -->
<div class="custom-modal-overlay" *ngIf="showMapModal">
  <div class="custom-modal">
    <button class="close-button" (click)="closeMapPopup()">Ã—</button>
    <h3>Location</h3>
    <h4>{{ selectedService?.categoryName }}</h4>
    <h3>Address</h3>
    <p>{{ selectedService?.address }}</p>
    <div id="map-container">
      <iframe 
        width="100%" 
        height="250" 
        frameborder="0" 
        style="border:0" 
        src="https://www.openstreetmap.org/export/embed.html?bbox=77.9827%2C12.8998%2C78.0061%2C12.9148&layer=mapnik&marker=12.9073%2C78.0002" 
        allowfullscreen>
      </iframe>
    </div>
  </div>
</div>

  